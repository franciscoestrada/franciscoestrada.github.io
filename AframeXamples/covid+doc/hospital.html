<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Particle Player Component - Magic</title>
    <meta name="description" content="Magic example for Particle Player component."></meta>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>-->
    <script src="js/aframe-particleplayer-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v5.1.0/dist/aframe-extras.min.js"></script>

  </head>
  <body>
    <a-scene background="color: #222">
      <a-assets>
        <a-asset-item id="pelea" src="../modelos3d/doctor.glb"></a-asset-item>
        <a-asset-item id="particlesOrbJson" src="particles-orb.json"></a-asset-item>
        <a-asset-item id="particlesEnergyJson" src="particles-energy.json"></a-asset-item>
        <a-asset-item id="particlesDustJson" src="particles-dust.json"></a-asset-item>
        <img src="energy.png" id="dustTex">
        <img src="piso.jpg" id="floorTex">
        <img src="star.png" id="starTex">
        <img src="energy.png" id="energyTex">
        <img src="floor_roughness.jpg" id="floorRoughTex">
      </a-assets>

      <!-- El modelo 3D animado  -->
      <a-entity position="0 0 -3" >
		 <a-entity gltf-model="#pelea" position="0 0 0" scale="1.2 1.2 1.2" animation-mixer="clip: *; loop: pingpong;"></a-entity>
     <a-animation attribute="rotation" from="0 0 0" to="0 360 0" dur="12000" repeat="indefinite"></a-animation>	
    </a-entity> 

     <!-- Las partÃ­culas  -->
      <a-entity position="0 0 -2.5" rotation="0 -20 0">
        <a-entity particleplayer="delay: 500; src: #particlesOrbJson; img: #starTex; dur: 4000; count: 40%; scale: 2.5; pscale: 9; interpolate: false; shader: standard; poolSize: 1; loop: true"></a-entity>

        <a-entity particleplayer="delay: 500; src: #particlesEnergyJson; img: #energyTex; dur: 4000; count: 100%; scale: 2.5; pscale: 2; interpolate: false; shader: standard; poolSize: 1; loop: true;"></a-entity>

        <a-entity particleplayer="delay: 500; src: #particlesDustJson; img: #dustTex; dur: 8000; count: 100%; scale: 3.5; pscale: 1; interpolate: false; shader: standard; poolSize: 1; loop: true; color: #aaf"></a-entity>
      </a-entity>

      <!-- Luces: ambient, directional, hemisphere, point, spot
            shader: flat  -->
      <a-entity light="type: ambient; color: #BBB"></a-entity>
      <a-light position="4 5 -10" type="point" color="#bbb"></a-light>
 <!-- <a-light position="-6 14 20" type="point" color="#fff"></a-light> -->

      <!-- Piso y paredes -->
      <a-plane width="4" height="12" position="0 0 -4" rotation="-90 0 0" material="src: hospital/h-b.jpg; repeat: 1 3;"></a-plane>
      <a-plane width="4" height="12" position="0 4 -4" rotation="90 0 0" material="src: hospital/h-t.jpg; repeat: 1 3; color: white;"></a-plane>
      <a-plane width="4" height="4" position="0 2 -10" material="src: hospital/h-f.jpg;"></a-plane>
      <a-plane width="12" height="4" position="2 2 -4" rotation="0 -90 0" material="src: hospital/h-d.jpg; repeat: 3 1;"></a-plane>
      <a-plane width="12" height="4" position="-2 2 -4" rotation="0 90 0" material="src: hospital/h-i.jpg; repeat: 3 1;"></a-plane>

    </a-scene>

  </body>
</html>
